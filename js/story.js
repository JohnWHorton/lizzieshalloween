
var storyChapters = [
    {},
    {
        id: 1,
        title: "Chapter 1: Elizabeth’s Halloween Surprise",
        image: '<img src="images/chapter1.png" alt="Elizabeth’s Halloween Surprise">',
        storytext: `It was Halloween night, and little Elizabeth, who was only three, stood in the hallway holding her baby doll. 
She blinked her big eyes once… twice… because something very strange was happening.
Mummy walked out of the bedroom wearing a long black dress and a pointy hat.

“Mummy?” Elizabeth whispered. “Why you look… spooky?”

Mummy laughed softly. “It’s just a costume, sweetheart. I’m pretending to be a witch.”
Elizabeth wasn’t sure she liked that. Mummy didn’t feel like a witch. Mummy felt like… well… Mummy.

Then Daddy came down the stairs with a big red cape and shiny teeth.
Elizabeth gasped. “Daddy! Your teeth are broken!”
Daddy knelt down. “They’re pretend teeth. I’m being a vampire tonight.”

Elizabeth huged her baby doll tighter. This was getting very confusing.

And then Will jumped out from behind the sofa wearing a skeleton suit.
“Boo!” he shouted.
Elizabeth squeaked and hid behind Mummy’s legs. “Will is bones!”
Will pulled off his mask. “It’s just me! See? I’m still here.”

Elizabeth peeked out. Everyone looked funny and strange… but their voices were the same. Their smiles were the same. Their hugs were the same.
Mummy picked her up. “Costumes are just clothes we wear for fun. Underneath, we’re still us.”

Elizabeth touched Mummy’s hat. It was soft. She touched Daddy’s cape. It was swishy. She poked Will’s skeleton tummy. He gigled.

Slowly, Elizabeth smiled.
“Can I be dressed too?” she asked.
“Of course!” said Daddy.

They put her in a tiny pumpkin costume. It was round and warm and made her look like a very cute orange bubble.
When she looked in the mirror, Elizabeth laughed. “I’m a pumpkin!”

And just like that, Halloween wasn’t scary anymore. It was silly. It was fun. 

And Elizabeth held everyone’s hands as they went out into the twinkly, spooky night — together.`,
        previousdesc: "Back to Index",
        previous: "loadChapter(0)",
        nextdesc: "Next Chapter",
        next: "loadChapter(2)"
    },
    {
        id: 2,
        title: "Chapter 2: Elizabeth’s Spooky Walk",
        image: '<img src="images/chapter2.png" alt="Elizabeth’s Spooky Walk">',
        storytext: `Elizabeth held Mummy’s hand as they walked down the street. Houses glowed with orange lights, and pumpkins smiled from porches. 
But even with her warm pumpkin costume, Elizabeth felt a tiny shiver.

A tall person dressed like a monster stomped past them. His mask had big teeth.
Elizabeth pressed her face into Mummy’s leg.
“Mummy… that man has a scary face.”
Mummy knelt down. “It’s just a mask, sweetheart. Underneath, he’s just a person going trick‑or‑treating like us.”

Elizabeth peeked. The monster waved kindly. That helped… but only a little.

At the next house, a group of older kids ran by dressed as zombies. Their clothes were ripped, and they made silly groaning noises.
Elizabeth squeaked and hid behind Daddy’s cape.

“Daddy, they sound funny… but scary.”

Daddy picked her up. “I know. Some costumes look spooky. But remember, they’re just kids pretending.”

Will walked beside them, swinging his skeleton bucket. “If anyone scares you, Lizzie, just look at me. I’m your big brother skeleton!”
Elizabeth looked at Will’s glowing bones. She wasn’t scared of him — not even a bit. That made her feel braver.

When they reached the next door, a friendly lady dressed as a pumpkin opened it. She smiled wide.
“Well hello, little pumpkin!” she said.
Elizabeth whispered, “Trick‑or‑treat…” and the lady dropped sweets into her bucket.

Plink.

That sound made Elizabeth smile. She liked that sound.

As they walked to the next house, another spooky costume appeared — a ghost with a sheet over its head. Elizabeth froze.

But then the ghost tripped on the pavement and gigled.
“Oops!”
Elizabeth blinked. Ghosts didn’t gigle. Only kids did.

Slowly, she let go of Mummy’s leg.

“Costumes are just pretend,” she said softly, as if reminding herself.

“That’s right,” Mummy said, giving her hand a squeeze.
And even though Elizabeth still felt a little scared sometimes, she kept going — because she wasn’t alone. 
She had Mummy, Daddy, and Will. And her pumpkin costume made her feel just brave enough.`,
        previousdesc: "Previous chapter",
        previous: "loadChapter(1)",
        nextdesc: "Next Chapter",
        next: "loadChapter(3)"
    },
    {
        id: 3,
        title: "Chapter 3: Elizabeth’s Restless Sleep",
        image: '<img src="images/chapter3.png" alt="Elizabeth’s Restless Sleep">',
        storytext: `When they finally got home, Elizabeth’s pumpkin costume was a little crooked, and her eyes were droopy from all the excitement. Mummy helped her out of it and into her soft pyjamas.

“Did you have a good Halloween, sweetheart?” Mummy asked as she tucked the blanket around her.
Elizabeth nodded, but only a tiny bit.

“It was fun… but the scary people were too scary.”

Mummy brushed a curl from her forehead.
“I know. Sometimes pretend things can still feel big. But you’re safe now. Daddy, Will, and I are right here.”

Elizabeth clutched her baby and let out a small sigh.

“Stay with me, Mummy.”
“I’ll stay until you fall asleep.”

Mummy sat beside her, humming a soft tune. The room was warm, the night-light glowed gently, and the house felt calm again.

Elizabeth’s eyes fluttered… opened… fluttered again… and then slowly closed.

Soon she was asleep — but not a quiet, still sleep. She wrigled a little. Her eyebrows scrunched. Her tiny hands held her doll tightly.

Her dreams were full of pumpkins and witches’ hats and glowing skeletons. Nothing truly bad… just a little too bright, a little too loud, like her mind was still trying to understand everything she’d seen.

Mummy watched her for a moment, smoothing the blanket.
“Rest, my little pumpkin,” she whispered.

And Elizabeth slept on — safe, loved, and slowly settling.`,
        previousdesc: "Previous chapter",
        previous: "loadChapter(2)",
        nextdesc: "Next Chapter",
        next: "loadChapter(4)"
    },
    {
        id: 4,
        title: "Chapter 4: The Glow in Elizabeth’s Room",
        image: '<img src="images/chapter4.png" alt="The Glow in Elizabeth’s Room">',
        storytext: `Elizabeth suddenly sat up in bed.

Her room was quiet… but not quite the same. A soft, warm glow shimmered in the corner, like someone had switched on a tiny star.
Elizabeth rubbed her eyes.

“What… what’s that?”

Then she heard it — tiny voices. Soft. Chattery. Like whispers made of gigles.

She looked toward her toy shelf.

Her toys were moving.
Not fast. Not scary. Just… alive.

Her teddy bear was patting her doll on the head.
Her toy rabbit was hopping in slow, bouncy jumps.

Her wooden train puffed along the shelf, going chug-chug-chug in a very proud way.
Elizabeth blinked hard.

“Teddy… you’re… talking?”

Teddy turned around and waved a fuzzy paw.

“Hello, Lizzie! We didn’t mean to wake you. We’re having a toy meeting.”
The rabbit nodded. “Very important business.”

The doll twirled. “We’re deciding who gets to guard you tonight!”

Elizabeth’s mouth fell open. She wasn’t scared — not this time. The glow made everything feel soft and safe, like a dream wrapped in a blanket.

“Guard me?” she whispered.

Teddy puffed out his chest. “Of course! You had a big night. Lots of costumes. Lots of feelings. So we’re taking turns keeping watch.”

The wooden train tooted proudly. “Choo! I can stay awake longest!”

The rabbit shook its head. “No, no, I can hop to the door and back faster!”

The doll sighed. “Boys… please.”

Elizabeth gigled. A tiny, sleepy gigle.
“Are you really real?” she asked.

Teddy climbed onto her pillow. “Only when you need us.”

Elizabeth lay back down, her eyes growing heavy again.
“Okay… you can guard me.”

The toys nodded, saluted, or hopped in agreement.

And as Elizabeth drifted back into sleep, she felt safe — wrapped in magic, watched over by the friends she loved most.`,
        previousdesc: "Previous chapter",
        previous: "loadChapter(3)",
        nextdesc: "Next Chapter",
        next: "loadChapter(5)"
    },
    {
        id: 5,
        title: "Chapter 5: The Fairy’s Warning",
        image: '<img src="images/chapter5.png" alt="The Fairy’s Warning">',
        storytext: `Just as the toys were settling into their “guarding” positions, a sudden whoosh of cool air swept through the room.

Elizabeth blinked awake again.
The window — which had been closed — was now open just a crack. The curtains fluttered like soft wings.

And then… real wings appeared.

A tiny fairy zipped inside, glowing like a sparkly firefly. Her dress shimmered like moonlight, and her wings hummed like a happy bumblebee.

Teddy gasped.
“Oh dear. This can’t be good.”
The fairy landed gently on Elizabeth’s blanket.

“Elizabeth,” she said in a voice as soft as bells, “we have a problem.”
Elizabeth sat up, clutching her baby doll.

“A… a problem?”

The fairy nodded, her wings drooping a little.
“I’m afraid the gremlins are in the house.”

The rabbit squeaked. “Not the gremlins!”
The wooden train wobbled on its wheels. “Choo… oh no…”

Elizabeth’s eyes grew wide.
“gremlins? Here?”

The fairy held up her tiny hands.
“Don’t worry, little pumpkin. They’re not dangerous… just terribly, terribly naughty.”

The doll crossed her arms. “What kind of mischief this time?”

The fairy sighed.
“They’re hiding things. Moving things. Making little messes. And if we don’t stop them soon, they’ll turn the whole house upside down.”

Elizabeth swallowed.
“But… why me?”

The fairy smiled kindly.

“Because gremlins listen to children. Especially brave ones. And tonight, you were very brave — even when you were scared.”
Elizabeth looked at her toys. They all nodded, cheering her on in their tiny ways.

Teddy stepped forward.
“We’ll go with you, Lizzie. You won’t be alone.”

Elizabeth took a deep breath.
“Okay… I’ll help.”

The fairy’s wings sparkled brighter.
“Wonderful! Then hurry — the gremlins are already up to mischief downstairs.”
And with that, the adventure truly began.`,
        previousdesc: "Previous chapter",
        previous: "loadChapter(4)",
        nextdesc: "Next Chapter",
        next: "loadChapter(6)"
    },
    {
        id: 6,
        title: "Chapter 6: Elizabeth and the Gremlin Hunt",
        image: '<img src="images/chapter6.png" alt="Elizabeth and the Gremlin Hunt">',
        storytext: `he fairy fluttered beside Elizabeth’s cheek, her wings glowing brighter now.

“We must hurry,” she whispered. “The Gremlins are downstairs, and they’re already causing trouble.”

Elizabeth slid out of bed, her tiny feet touching the soft carpet. Teddy, the rabbit, the doll, and even the wooden train hopped down after her.

Teddy puffed out his chest.
“Team, stay close. Gremlins are sneaky.”

The fairy nodded.
“They’re small, green, and very silly. They love hiding in shadows and making messes. But they’re scared of brave children.”

Elizabeth took a deep breath.
“I’m brave… a little bit.”

“That’s enough,” the fairy said kindly.
They tip‑toed to the bedroom door. Elizabeth pushed it open slowly. The hallway was dim and quiet, except for a faint clink… clatter… gigle drifting up from downstairs.

The rabbit’s ears twitched.
“They’re in the kitchen!”

Down the stairs they crept — Elizabeth holding Teddy, the fairy lighting the way like a tiny lantern.
When they reached the bottom, they peeked around the corner.

And there they were.

Three tiny gemlins, no biger than kittens, with pointy ears and round bellies. They were green and wigly and covered in crumbs. 
One was wearing Daddy’s slipper on his head. Another was jugling spoons. The third was trying to climb into the fruit bowl.

Elizabeth gasped.

“They’re… silly!”

The gemlins froze. All three turned slowly toward her, eyes wide.
“Oh no,” said the slipper‑hat gemlin.

“It’s a child,” whispered the spoon‑jugler.

“A brave one,” squeaked the fruit‑bowl climber.

The fairy flew forward.
“gemlins! You know the rules. No mischief in human houses!”

The gemlins shuffled their feet.
“We were bored…”
“We wanted snacks…”
“We like spoons…”

Elizabeth stepped forward, huging Teddy tight.

“You can’t make a mess. Mummy will be cross.”

The gemlins looked at each other.
“We don’t want Mummy cross,” they said together.

Elizabeth nodded firmly.
“Then you have to stop.”

The gemlins sighed, drooping like wilted flowers.
“Okay…” they mumbled.

The fairy clapped her hands.
“Wonderful! Now, gemlins, clean up your mess and head home.”

The gemlins scrambled around, putting spoons back, brushing crumbs, and hopping out of the fruit bowl. Then they lined up in front of Elizabeth.
“Sorry, brave pumpkin girl,” they said.

Elizabeth smiled shyly.
“It’s okay.”

The gemlins bowed, then scampered toward the back door. With a pop! of sparkles, they vanished into the night.

The fairy turned to Elizabeth.
“You did it. They listened to you.”

Elizabeth felt warm and proud.
“I was brave… even though I was scared.”

“That,” said Teddy, “is the bravest kind of brave.”

The fairy smiled.
“Now let’s get you back to bed.”`,
        previousdesc: "Previous chapter",
        previous: "loadChapter(5)",
        nextdesc: "Next Chapter",
        next: "loadChapter(7)"
    },
    {
        id: 7,
        title: "Chapter 7: Back to bed",
        image: '<img src="images/chapter7.png" alt="Back to bed">',
        storytext: `The fairy fluttered beside Elizabeth as they climbed the stairs, her glow soft and warm like a night‑light that could fly.

Teddy walked proudly at Elizabeth’s side.

“You were amazing, Lizzie. Gremlins never listen to anyone.”

The rabbit hopped behind them.
“And you didn’t even shout! You just… talked. That’s real bravery.”

Elizabeth felt a tiny smile grow on her face.
“I was scared… but I did it anyway.”
“That’s the magic,” the fairy said.

They reached her bedroom. Everything looked just as she’d left it — the blankets rumpled, the night‑light glowing, the toys’ tiny footprints still on the carpet.

The fairy landed gently on her pillow.
“Now, little pumpkin, it’s time to rest. The gremlins are gone, the house is safe, and your dreams are waiting.”

Elizabeth climbed into bed, pulling the blanket up to her chin. Teddy snuggled beside her. The rabbit curled at her feet. The doll leaned against her pillow like a tiny guard.

The wooden train settled on the bedside table and whispered,
“Choo… goodnight.”

The fairy hovered above her, sprinkling a soft shimmer of light that felt like warm snowflakes.
“Sleep now,” she said. “You’ve done enough for one night.”`,
        previousdesc: "Previous chapter",
        previous: "loadChapter(6)",
        nextdesc: "",
        next: "",
    },
    {}
];

var id = getParameter("id");
var chapter = storyChapters[id];

function getParameter(id) {
    let params = new URLSearchParams(window.location.search);
    id = params.get(id);

    window.onload = () => loadChapter(id);
}
function loadChapter(id) {

    if (speechSynthesis) {
        speechSynthesis.cancel();
    }

    var chapter = storyChapters[id];

    //   if (!chapter) return;

    document.getElementById("chapter-title").innerText = chapter.title;
    document.getElementById("chapter-image").innerHTML = chapter.image;
    document.getElementById("storytext").innerHTML = chapter.storytext;

    // Update the text

    if (id == 1) {
        var navbtns = `<a href="index.html">Back to Index</a> |
    <a href="#" onclick="`+ chapter.next + `">` + chapter.nextdesc + `</a>`;
    } else if (id == 7) {
        var navbtns = `<a href="#" onclick="` + chapter.previous + `">` + chapter.previousdesc + `</a> |
            <a href="index.html">Back to Index</a>`;
    } else {
        var navbtns = `<a href="#" onclick="` + chapter.previous + `">` + chapter.previousdesc + `</a> |
    <a href="#" onclick="`+ chapter.next + `">` + chapter.nextdesc + `</a>`;
    }

    document.getElementById("navbtns").innerHTML = navbtns;

    document.querySelector('pre').scrollTop = 0;
}


function speakText() {
    const text = document.getElementById("storytext").innerText;

    const utterance = new SpeechSynthesisUtterance(text);

    // Voice style settings
    utterance.pitch = 1.3;      // slightly higher pitch
    utterance.rate = 0.8;       // slower, gentle pacing
    utterance.volume = 0.9;     // softer volume

    // Optional: choose a specific voice if available
    const voices = speechSynthesis.getVoices();
    const gentleVoice = voices.find(v =>
        v.name.toLowerCase().includes("child") ||
        v.name.toLowerCase().includes("girl") ||
        v.name.toLowerCase().includes("young")
    );

    speechSynthesis.speak(utterance);
}